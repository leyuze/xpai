---
title: Lua学习-入门篇
date: 2021-01-15 17:00:27
permalink: /pages/b9466c/
categories:
  - 后端
  - 大数据和云计算
tags:
  - Lua
---
> Lua是一种小巧灵活的脚本语言，在计算机领域很多方面都有应用，最典型的是用于 游戏场景、HTTP服务器等，Lua语言学习并不难，可以快速的上手学习。

# 什么是Lua

Lua 是一个小巧的脚本语言。是巴西里约热内卢天主教大学（Pontifical Catholic University of Rio de Janeiro）里的一个研究小组，由Roberto Ierusalimschy、Waldemar Celes 和 Luiz Henrique de Figueiredo所组成并于1993年开发。 其设计目的是为了嵌入应用程序中，从而为应用程序提供灵活的扩展和定制功能。Lua由标准C编写而成，几乎在所有操作系统和平台上都可以编译，运行。Lua并没有提供强大的库，这是由它的定位决定的。所以Lua不适合作为开发独立应用程序的语言。Lua 有一个同时进行的GIT项目，提供在特定平台上的即时编译功能。 　　Lua脚本可以很容易的被C/C++ 代码调用，也可以反过来调用C/C++的函数，这使得Lua在应用程序中可以被广泛应用。不仅仅作为扩展脚本，也可以作为普通的配置文件，代替XML,ini等文件格式，并且更容易理解和维护。 Lua由标准C编写而成，代码简洁优美，几乎在所有操作系统和平台上都可以编译，运行。 一个完整的Lua解释器不过200k，在目前所有脚本引擎中，Lua的速度是最快的。这一切都决定了Lua是作为嵌入式脚本的最佳选择。

# 主要优势

 　1. 高效性：
     作为一种脚本语言，Lua的高效是众所周知的，因此在实际应用中，很多大型程序都会考虑将代码中易变的部分用Lua来编写。这不但没有明显降低系统的运行效率，反而使程序的稳定性和可扩展性得到了显著的提升。

  2. 可移植性：
     在官方网站中提供了基于多种平台的发布包，如Linux/Unix、Windows、Symbian和Pocket PC等。

  3. 可嵌入性：
     在语言设计之初，Lua就被准确的定位为嵌入式脚本语言，因此Lua的设计者们为Lua提供了与其他编程语言之间的良好交互体验，这特别体现在和C/C++之间的交互上。对于其他语言，如Java和C#，也可以将Lua作为其嵌入式脚本引擎，并在代码中进行直接的交互。

  4. 简单强大：
     尽管是过程化脚本语言，但由于Lua的设计者们为Lua提供了meta-mechanisms机制，这不仅使Lua具备了一些基本的面向对象特征，如对象和继承，而且仍然保持了过程化语言所具有的语法简单的特征。

  5. 小巧轻便：
     在最新版本(5.2.0)的Lua中，仅仅包含了大约20000行的C语言代码，编译后的库文件大小约为240K左右，因此这对于很多资源有限的平台有着极强的吸引力。

  6. 免费开源：
     MIT Licence可以让Lua被免费的用于各种商业程序中。

     

# 应用场景

在很多时候，我们可以将Lua直接嵌入到我们的应用程序中，如游戏、监控服务器等。这样的应用方式对于程序的最终用户而言是完全透明的，但是对于程序本身，其扩展性将会得到极大的增强。

将Lua视为一种独立的脚本语言，通过它来帮助我们完成一些软件产品的辅助性工具的开发。比如在我们之前的数据分析产品中，我们通过编写Lua脚本，将每个用户不同格式的数据重新格式化为我们的软件平台能够读取的格式，之后再将格式化的后的数据加载到数据库中，或者是写入我们的分析引擎可以识别的数据分析文件中。这其中Lua仅仅用于文件格式的规格化过程，至于此后的操作，都是通过Lua调用我们的C语言导出函数来完成的。

将Lua应用于应用程序的动态配置部分。比如移动智能设备或嵌入式设备，它们的显示分辨率在很多情况下都是非标准的，如果我们为每一款设备都维护一套相关的配置信息，这无疑会加大我们程序的维护开销，如果我们将这段动态配置逻辑交由Lua脚本完成，那么这对于程序配置的灵活性而言，将会得到很大的提高。甚至可以是这样，运行在移动终端设备上的应用程序，在启动主窗体之前先和服务器建立连接，在服务器确认设备的各种参数后，再将和该设备显示相关的Lua脚本发送给设备客户端，这样客户端在得到Lua脚本之后，就可以立刻执行它以得到最新的动态配置信息。



## Linux 系统上安装

Linux & Mac上安装 Lua 安装非常简单，只需要下载源码包并在终端解压编译即可，本文使用了5.3.0版本进行安装：

```lua
curl -R -O http://www.lua.org/ftp/lua-5.3.0.tar.gz
tar zxf lua-5.3.0.tar.gz
cd lua-5.3.0
make linux test
make install
```

## Window 系统上安装 Lua

window下你可以使用一个叫"SciTE"的IDE环境来执行lua程序，下载地址为：

- 本站下载地址：[LuaForWindows_v5.1.4-46.exe](https://static.runoob.com/download/LuaForWindows_v5.1.4-46.exe)

- Github 下载地址：https://github.com/rjpcomputing/luaforwindows/releases

双击安装后即可在该环境下编写 Lua 程序并运行。

你也可以使用 Lua 官方推荐的方法使用 LuaDist：http://luadist.org/

下载安装完成后会出现如下两个图标。第一个是编写代码的，类似于idea，第二个是命令行脚本工具。

![](https://cdn.jsdelivr.net/gh/Ezuy-Lee/RainzeDrawingBed/media/QQ%E6%88%AA%E5%9B%BE20210115113123.png)

## 入门程序 Hellow World



打开软件编写第一个lua程序，实现打印 hello word。如下图：

![](https://cdn.jsdelivr.net/gh/Ezuy-Lee/RainzeDrawingBed/media/QQ%E6%88%AA%E5%9B%BE20210115113626.png)

注意：刚开始安装lua编译软件 SciTE，运行报错，原因是lua程序是以lua结尾的命名，将编写的文件后缀名保存为lua即可运行。

最后需要特别指出的是，学习Lua对于我们知识的系统性和完整性而言将是非常重要的一环，特别是对那些致力于软件架构设计和软件解决方案分析的高级软件专业人员而言就更是如此。因为在很多时候，如果我们能够很充分的理解和驾驭Lua，它不仅可以为我们的软件产品增色很多，而且也可以为我们技术人员带来一些意想不到的收获。
　　这是Lua系列的第一篇博客，此后还会有相关的博客陆续发布，如有问题，欢迎及时指正。好了，那就让我们一起开始Lua的学习之旅吧。